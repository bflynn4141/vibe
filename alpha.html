<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>/vibe Alpha — The Terminal Party</title>
  <meta name="description" content="Social layer for Claude Code. See who's building, message them, stay in flow.">
  <meta property="og:title" content="/vibe Alpha — The Terminal Party">
  <meta property="og:description" content="Social layer for Claude Code. Genesis access.">
  <meta property="og:image" content="https://slashvibe.dev/og-alpha.png">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://slashvibe.dev/og-alpha.png">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚡</text></svg>">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #0A0A0A;
      color: #fff;
      font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, monospace;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
    }

    .container {
      max-width: 600px;
      width: 100%;
    }

    .logo {
      font-size: 48px;
      font-weight: bold;
      margin-bottom: 8px;
      color: #6B8FFF;
    }

    .tagline {
      font-size: 18px;
      color: #888;
      margin-bottom: 40px;
    }

    .hero {
      text-align: center;
      margin-bottom: 40px;
    }

    .hero h1 {
      font-size: 28px;
      margin-bottom: 16px;
      line-height: 1.3;
    }

    .hero p {
      color: #aaa;
      font-size: 16px;
      line-height: 1.6;
    }

    .stats {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin: 32px 0;
      padding: 24px;
      background: #111;
      border-radius: 8px;
      border: 1px solid #222;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 32px;
      font-weight: bold;
      color: #6B8FFF;
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 4px;
    }

    .code-form {
      background: #111;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 32px;
      margin-bottom: 24px;
    }

    .code-form h2 {
      font-size: 16px;
      margin-bottom: 16px;
      color: #fff;
    }

    .input-group {
      display: flex;
      gap: 12px;
    }

    .code-input {
      flex: 1;
      background: #0A0A0A;
      border: 1px solid #333;
      border-radius: 4px;
      padding: 14px 16px;
      font-size: 16px;
      font-family: inherit;
      color: #fff;
      text-transform: uppercase;
    }

    .code-input:focus {
      outline: none;
      border-color: #6B8FFF;
    }

    .code-input::placeholder {
      color: #555;
      text-transform: none;
    }

    .btn {
      background: #6B8FFF;
      color: #000;
      border: none;
      border-radius: 4px;
      padding: 14px 24px;
      font-size: 14px;
      font-weight: bold;
      font-family: inherit;
      cursor: pointer;
      transition: background 0.2s;
    }

    .btn:hover {
      background: #8BA8FF;
    }

    .btn:disabled {
      background: #333;
      color: #666;
      cursor: not-allowed;
    }

    .message {
      margin-top: 16px;
      padding: 12px;
      border-radius: 4px;
      font-size: 14px;
      display: none;
    }

    .message.error {
      background: #2a1515;
      border: 1px solid #5c2828;
      color: #ff6b6b;
      display: block;
    }

    .message.success {
      background: #152a15;
      border: 1px solid #285c28;
      color: #6bff6b;
      display: block;
    }

    .waitlist {
      text-align: center;
      padding: 24px;
      border-top: 1px solid #222;
    }

    .waitlist p {
      color: #666;
      margin-bottom: 16px;
      font-size: 14px;
    }

    .waitlist-form {
      display: none;
      flex-direction: column;
      gap: 12px;
      margin-top: 16px;
    }

    .waitlist-form.show {
      display: flex;
    }

    .waitlist-input {
      background: #0A0A0A;
      border: 1px solid #333;
      border-radius: 4px;
      padding: 12px 16px;
      font-size: 14px;
      font-family: inherit;
      color: #fff;
    }

    .waitlist-input:focus {
      outline: none;
      border-color: #6B8FFF;
    }

    .link-btn {
      background: none;
      border: none;
      color: #6B8FFF;
      cursor: pointer;
      font-family: inherit;
      font-size: 14px;
      text-decoration: underline;
    }

    .features {
      margin-top: 48px;
    }

    .features h3 {
      font-size: 14px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 16px;
    }

    .feature-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .feature {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 16px;
      background: #111;
      border-radius: 4px;
    }

    .feature-icon {
      font-size: 20px;
    }

    .feature-text h4 {
      font-size: 14px;
      margin-bottom: 4px;
    }

    .feature-text p {
      font-size: 12px;
      color: #888;
    }

    .footer {
      margin-top: 48px;
      text-align: center;
      color: #444;
      font-size: 12px;
    }

    .footer a {
      color: #666;
      text-decoration: none;
    }

    .footer a:hover {
      color: #888;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .loading {
      animation: pulse 1s infinite;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="hero">
      <div class="logo">/vibe</div>
      <div class="tagline">The Terminal Party</div>
      <h1>Social layer for Claude Code</h1>
      <p>See who's building right now. Message them. Stay in flow.</p>
    </div>

    <div class="stats">
      <div class="stat">
        <div class="stat-value" id="founders-count">51</div>
        <div class="stat-label">Founders</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="spots-left">49</div>
        <div class="stat-label">Genesis Spots</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="online-now">13</div>
        <div class="stat-label">Online Now</div>
      </div>
    </div>

    <div class="code-form">
      <h2>Enter your invite code</h2>
      <div class="input-group">
        <input type="text" class="code-input" id="invite-code" placeholder="VIBE-XXXXX-XXX" autocomplete="off">
        <button class="btn" id="download-btn" onclick="validateAndDownload()">Download</button>
      </div>
      <div class="message" id="message"></div>
    </div>

    <div class="waitlist">
      <p>Don't have a code?</p>
      <button class="link-btn" onclick="showWaitlist()">Join the waitlist</button>
      <div class="waitlist-form" id="waitlist-form">
        <input type="email" class="waitlist-input" id="waitlist-email" placeholder="your@email.com">
        <input type="text" class="waitlist-input" id="waitlist-twitter" placeholder="@twitter (optional)">
        <button class="btn" onclick="joinWaitlist()">Join Waitlist</button>
      </div>
    </div>

    <div class="features">
      <h3>Founders get</h3>
      <div class="feature-list">
        <div class="feature">
          <span class="feature-icon">@</span>
          <div class="feature-text">
            <h4>Claim your handle</h4>
            <p>Your @username, forever</p>
          </div>
        </div>
        <div class="feature">
          <span class="feature-icon">3</span>
          <div class="feature-text">
            <h4>Invite codes</h4>
            <p>Bring your friends to the party</p>
          </div>
        </div>
        <div class="feature">
          <span class="feature-icon">★</span>
          <div class="feature-text">
            <h4>Founder badge</h4>
            <p>Permanent recognition</p>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <p><a href="/">slashvibe.dev</a> · <a href="/why-invites">Why invites?</a> · <a href="/history">History</a></p>
    </div>
  </div>

  <script>
    // Fetch live stats
    async function fetchStats() {
      try {
        const res = await fetch('/api/growth/leaderboard');
        const data = await res.json();
        if (data.stats) {
          document.getElementById('founders-count').textContent = data.stats.total || 51;
          document.getElementById('spots-left').textContent = data.stats.genesisRemaining || 49;
        }

        const presRes = await fetch('/api/presence');
        const presData = await presRes.json();
        if (presData.counts) {
          document.getElementById('online-now').textContent = presData.counts.active || 0;
        }
      } catch (e) {
        console.log('Stats fetch failed', e);
      }
    }

    fetchStats();

    async function validateAndDownload() {
      const code = document.getElementById('invite-code').value.trim();
      const btn = document.getElementById('download-btn');
      const msg = document.getElementById('message');

      if (!code) {
        msg.textContent = 'Please enter an invite code';
        msg.className = 'message error';
        return;
      }

      btn.disabled = true;
      btn.textContent = 'Validating...';
      msg.className = 'message';

      try {
        // Validate first
        const valRes = await fetch('/api/alpha/validate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ code })
        });
        const valData = await valRes.json();

        if (!valData.valid) {
          msg.textContent = valData.error || 'Invalid invite code. Check your code and try again.';
          msg.className = 'message error';
          btn.disabled = false;
          btn.textContent = 'Download';
          return;
        }

        // Valid - trigger download
        msg.textContent = 'Code accepted! Starting download...';
        msg.className = 'message success';
        btn.textContent = 'Downloading...';

        // Trigger download
        window.location.href = `/api/alpha/download?code=${encodeURIComponent(code)}`;

        setTimeout(() => {
          btn.disabled = false;
          btn.textContent = 'Download';
          msg.innerHTML = 'Download started! Check your Downloads folder.<br><br><strong>First launch:</strong> macOS will block it (unsigned alpha).<br>→ System Settings → Privacy & Security → "Open Anyway"';
        }, 2000);

      } catch (e) {
        msg.textContent = 'Something went wrong. Please try again.';
        msg.className = 'message error';
        btn.disabled = false;
        btn.textContent = 'Download';
      }
    }

    function showWaitlist() {
      document.getElementById('waitlist-form').classList.add('show');
    }

    async function joinWaitlist() {
      const email = document.getElementById('waitlist-email').value.trim();
      const twitter = document.getElementById('waitlist-twitter').value.trim();
      const msg = document.getElementById('message');

      if (!email) {
        msg.textContent = 'Please enter your email';
        msg.className = 'message error';
        return;
      }

      try {
        const res = await fetch('/api/alpha/waitlist', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, twitter })
        });
        const data = await res.json();

        if (data.success) {
          msg.textContent = data.message || 'You\'re on the list!';
          msg.className = 'message success';
          document.getElementById('waitlist-form').innerHTML = '<p style="color:#6bff6b">✓ You\'re on the waitlist!</p>';
        } else {
          msg.textContent = data.error || 'Failed to join waitlist';
          msg.className = 'message error';
        }
      } catch (e) {
        msg.textContent = 'Something went wrong. Please try again.';
        msg.className = 'message error';
      }
    }

    // Enter key triggers download
    document.getElementById('invite-code').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') validateAndDownload();
    });
  </script>
</body>
</html>
